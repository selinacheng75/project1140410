<!DOCTYPE html>
<html lang="zh-TW">


<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ›¸æœ¬ç§Ÿå€Ÿç³»çµ±</title>
    <link rel="stylesheet" href="main.css">
</head>


<body>


    <button class="hamburger" onclick="toggleSidebar()">â˜°</button>


    <div class="sidebar" id="sidebar">
    <h2>åŠŸèƒ½é¸å–®</h2>
    <a href="sidebar.html?target=insertrent.html">ğŸ“„ æ–°å¢ç§Ÿå€Ÿè¨˜éŒ„</a>
    <a href="sidebar.html?target=backbook.html">ğŸ” é‚„æ›¸è¨˜éŒ„</a>
    <a href="sidebar.html?target=insertmember.html">ğŸ‘¤ æ–°å¢æœƒå“¡</a>
    <a href="sidebar.html?target=insertbook.html">ğŸ“š æ–°å¢æ›¸ç±</a>
    <a href="sidebar.html?target=demoAPI.html">ğŸ” æŸ¥è©¢è³‡æ–™</a>
    <a href="sidebar.html?target=demoAPI3.html">ğŸ” è³‡æ–™ç•°å‹•</a>
    <a href="sidebar.html?target=demoAPI2.html">ğŸ“Š å¾Œå°å ±è¡¨</a>

    </div>


    <div class="content" id="mainContent">
        <h1>æ­¡è¿ä½¿ç”¨ç³»çµ±</h1>
        <p>è«‹å¾å·¦å´é¸å–®é¸æ“‡åŠŸèƒ½ã€‚</p>
    </div>


    <script>
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }


        function getQueryParam(name) {
            const params = new URLSearchParams(window.location.search);
            return params.get(name);
        }


        async function loadPage(fileName) {
            try {
                const response = await fetch(fileName);
                if (!response.ok) throw new Error('è¼‰å…¥å¤±æ•—');
                const html = await response.text();


                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');


                const content = document.getElementById('mainContent');
                content.innerHTML = '';


                // ç§»é™¤èˆŠ scriptï¼ˆæ¨™è¨˜ç‚º data-dynamic çš„ï¼‰
                document.querySelectorAll('script[data-dynamic]').forEach(s => s.remove());


               // æ’å…¥é script å…ƒç´ 
        Array.from(doc.head.querySelectorAll('style')).forEach(style => {
            document.head.appendChild(style.cloneNode(true));
        });

        Array.from(doc.body.childNodes).forEach(node => {
            if (node.tagName !== 'SCRIPT') {
                content.appendChild(document.importNode(node, true));
            }
        });
                // ç­‰ DOM å¯¦éš›æ’å…¥å¾Œï¼Œå†å‹•æ…‹æ›è¼‰ script
                const scripts = doc.querySelectorAll('script');
                scripts.forEach(oldScript => {
                    const newScript = document.createElement('script');
                    if (oldScript.src) {
                        newScript.src = oldScript.src;
                    } else {
                        newScript.textContent = oldScript.textContent;
                    }
                    newScript.setAttribute('data-dynamic', 'true');
                    // æ³¨æ„ï¼šä¸æ˜¯åŠ åˆ° document.bodyï¼Œè€Œæ˜¯ mainContent å…§ï¼
                    // é€™æ¨£æ‰ä¿è­‰ DOM å­˜åœ¨å†åŸ·è¡Œï¼ˆå°¤å…¶æ˜¯ document.getElementByIdï¼‰
                    content.appendChild(newScript);
                });


                if (window.innerWidth <= 768) toggleSidebar(); // æ‰‹æ©Ÿæ”¶ sidebar
            } catch (err) {
                document.getElementById('mainContent').innerHTML =
                    `<p style="color:red;">âš  ç„¡æ³•è¼‰å…¥ ${fileName}ï¼š${err.message}</p>`;
            }
        }


        window.addEventListener('DOMContentLoaded', () => {
            const target = getQueryParam('target');
            if (target) {
            loadPage(target);
        }
        });


    </script>




</body>


</html>

